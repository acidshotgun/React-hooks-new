# Suspense

- [ ] `Suspense` - позволять отображать контент `fallback`, до тех пор, пока не будет загружен дочерний компонент.

![image](https://github.com/acidshotgun/react-hooks-new/assets/117285472/e38d146b-c863-4c18-9037-e9708b7965a5)

<br>

<h3>+ Reference </h3>

- [x] `children`: Актуальный `UI`, который должен быть отрисован. Если `children` приостанавливается во время рендеринга, `Suspense` переключится на отображение запасного контента `(fallback)`.

- [x] `fallback`: Альтернативный пользовательский интерфейс, который будет отображаться вместо реального, пока он не закончил загрузку.

<hr>
<br>
<br>

<h2>Usage</h2>

<h3>+ Отображение контента пока компонент грузится.</h3>

  - [ ] Оборачиваем часть приложения в `Suspense`

  ![image](https://github.com/acidshotgun/react-hooks-new/assets/117285472/8a63dd1f-3599-4214-8990-60d25e742d6f)

  + `React` будет отображать `фаллбек` загрузки до тех пор, пока весь код и данные, необходимые дочерним элементам, не будут загружены.

  + В примере ниже - тображается `Loader`, пока грузится контент `Albums` - компонент.

  [БАЗОВЫЙ ПРИМЕР](https://codesandbox.io/p/sandbox/base-suspense-4gxz9x?file=%2Fsrc%2FArtistPage.js)

<br>
<br>

<h3>+ Отображение вложенного контента разом.</h3>

- [ ] По умолчанию все дерево внутри `Suspense` рассматривается как единое целое. Например, даже если только один из этих компонентов приостановится в ожидании каких-то данных, все они вместе будут заменены индикатором загрузки:

- [ ] Затем, когда все они будут готовы к отображению, они появятся все сразу.

![image](https://github.com/acidshotgun/react-hooks-new/assets/117285472/1c418c12-0cf4-47e0-9512-03345fa30a06)

<br>
<br>

<h3>+ Отображение вложенного контента по мере загрузки.</h3>

- [ ] Компонент `Suspense` может содержать в себе другие компоненты `Suspense`, это позволить отображать контент последовательно по мере загрузки вложенных компонентов внутри дочерних `Suspense`.

![image](https://github.com/acidshotgun/react-hooks-new/assets/117285472/79ca8125-ee8c-45c2-b478-caf3bb4419f5)

- [x] Что происходит:

  + Если `Biography` еще не загрузилась, `BigSpinner` отображается вместо `всей области содержимого`.
  + Как только `Biography` завершит загрузку, `BigSpinner` будет заменен содержимым.
  + Если `Albums` еще не загрузился, `AlbumsGlimmer` отображается вместо `Albums и его родительской панели`.
  + Наконец, когда `Albums` завершает загрузку, он заменяет `AlbumsGlimmer`.
     
[ПРИМЕР ВЛОЖЕННЫХ SUSPENSE](https://codesandbox.io/p/sandbox/nested-suspense-37hpgt?file=%2Fsrc%2FArtistPage.js)

- [x] ТАким образом можно контролировать, какие части должны появляться одновременно, а какие последовательно.

<br>
<br>

<h3>+ Отображение старого контента во время загрузки нового.</h3>

- [x] СНАЧЧАЛА ПРОЙТИ `useDefferedValue()`, тк эт оиспользуется с ним.

<br>
<br>

<h3>+ Предотвращение скрытия уже раскрытого содержимого.</h3>

- [x] СНАЧЧАЛА ПРОЙТИ `startTransition`, тк эт оиспользуется с ним.

<br>
<br>

<h3>+ Индикация того, что переход происходит.</h3>

- [x] СНАЧЧАЛА ПРОЙТИ `useTransition()`, тк эт оиспользуется с ним.
