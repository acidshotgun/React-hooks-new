# useEffect

<h2>Что такое useEffect</h2>

- [x] `useEffect()` - это хук, который позволяет синхронизировать наш компонент с внешней системой (сущность, не относящаяся к React), когда это необходимо. К внешней системе относится:

<br>

  + **`Получение данных из API`** : Отправка запроса на сервер и получение данных для помещения их в стейт.
  + **`Подписка на события`** : Сиуации, когда компонент должен подписаться на внешние события - события браузера/окна/клавиатуры например, события WebSockets - когда компонент должен подписаться на события сокетов (типа открыли чат и установили прямое соеденение).
  + **`Обновление заголовка документа`** : Браузер так же внешняя система, и для взаимодействовать с ним можно так же с хуком, например, чтобы установить заголовок вкладки.
  + **`Отправка аналитических данных и сбор метрик`** : при открытии / закрытии компонента можно собирать данные о взаимодействии пользователя с приложением.

<br>

  - [ ] любые действия, которые необходимо выполнить помимо обычного рендеринга компонентов, такие как получение данных из API, подписка на события, обновление документа и т.д называются `Side effects`

<hr>
<br>
<br>

<h2>Возможно, вам не понадобится эффект</h2>

![image](https://github.com/acidshotgun/react-hooks-new/assets/117285472/e122a93f-0647-4acc-8f1f-2ac623a27b3e)

<hr>
<br>
<br>

<h2>Как написать эффект</h2>

  - [ ]  `Объявить эффект`. По умолчанию ваш эффект будет запускаться после каждого рендеринга.
  - [ ] `Указать зависимости эффекта`. Большинство эффектов следует запускать повторно только при необходимости , а не после каждого рендеринга. Например, анимация постепенного появления должна срабатывать только при появлении компонента. Подключение и отключение от комнаты чата должно происходить только при появлении и исчезновении компонента или при изменении комнаты чата.
  - [ ] `При необходимости добавьте очистку`. Некоторым эффектам необходимо указать, как остановить, отменить или очистить все, что они делали. Например, для «подключения» необходимо «отключить», для «подписки» необходимо «отменить подписку», а для «извлечения» необходимо либо «отменить», либо «игнорировать»

```javascript
    useEffect(() => {
      // Логика хука

      return () => {
        // Отписка 
      };
      // Массив зависимостей
    }, [...]);
```

