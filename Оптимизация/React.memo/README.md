# React.memo

- [ ] **`React.memo`** - Это `компонент высшего порядка (HOC)` - позволяет пропустить `повторный рендеринг компонента`, если его пропсы `не изменись`.

<br>

+ Это отличает его от обычного компонента, который перерисовывается всегда, когда перерисовывается родительский компонент.

![image](https://github.com/acidshotgun/react-hooks-new/assets/117285472/85917791-0e11-4e14-ad55-30240865c5a8)

<br>

- [x] Суть:

  + Мы имеем родительский компонент, который может часто производить ререндер.
  + Этот компонент имеет дочерние компоненты, которые будут ререндерится вместе с ним.
  + Если вниз передаются пропсы и они меняются то ок. Но что если пропсы не меняются? Зачем тогда вызывать доп рендеры для дочерних компонентов?

  <br>

  + В этом случае мы можем обернуть эти дочерние компоненты в `React.memo`.
  + Эти компоненты будут ререндерится `ТОЛЬКО` когда `меняются передающиеся в них пропсы`.

<hr>
<br>
<br>

<h2>Использование React.memo</h2>

- [ ] `React.memo` - принимает компонент и возвращает модифицированную версию компонента.

- [ ] `React.memo` - можно использовать двумя способоами.

<br>

  + С использованием дефолтного алгоритма сравнения. (работает по умолчанию).
  + Обычно его достаточно и работает он превосходно.
    
  ```typescript
    const UserCard = memo(({ name, email, phone, avatar }) => {
      return (
        <div clasName="user-card">
          <img src={avatar} alt={name} />
          <h2>{name}</h2>
          <p>{email}</p>
          <p>{phone}</p>
        </div>
      );
    });
  ```

  <br>

  + С использованием кастомного (своего) алгоритма сравнения.
     
  ```typescript
    const areEqual = (prevProps, nextProps) => {
      // Сравнение пропсов
    }
    
    const UserCard = memo(({ name, email, phone, avatar }) => {
      return (
        <div clasName="user-card">
          <img src={avatar} alt={name} />
          <h2>{name}</h2>
          <p>{email}</p>
          <p>{phone}</p>
        </div>
      );
    }, areEqual);
  ```

<hr>
<br>
<br>

<hr>
<br>
<br>

<h2>Примеры</h2>

[ПРИМЕР МЕМОИЗАЦИИ КОМПОНЕНТОВ](https://codesandbox.io/p/sandbox/react-memo-pjjgs6?file=%2Fsrc%2FComponent.tsx%3A14%2C2)

  + Компонент `Component` мемоизирован и следит за пропсом `componentCounter`(это в стейте лежит в App).
  + Ререндерится компонент `Component` будет только в том случае, если изменяется состояние `componentCounter`
  + Если изменяется состояние `counter` в App - то только `App`, и `User` произведут ререндер.
  + Если изменяется состояние `componentCounter` в App - то всё, в том числе и `Component` произведет ререндер.

  <br>

  - [ ] Итог:

    + Состояние `counter` меняется - ререндер только `App` и `User`
    + Состояние `componentCounter` меняется - ререндер только всего, в том числе и `Component`, тк он следит за этим состоянием.
